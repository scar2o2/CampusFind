<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lost & Found Portal</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f5f5f5;
    }
    h2 {
      color: #333;
    }
    form {
      background: #fff;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    input, select, button {
      padding: 8px;
      margin: 5px 0;
      width: 100%;
      box-sizing: border-box;
    }
    button {
      cursor: pointer;
      background-color: #4CAF50;
      color: white;
      border: none;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
      background: #fff;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    th, td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    th {
      background-color: #f0f0f0;
    }
  </style>
</head>
<body>

<h2>Lost & Found Portal</h2>

<!-- User Form -->
<form id="userForm">
  <h3>Add User</h3>
  <input type="text" id="userName" placeholder="Name" required />
  <input type="email" id="userEmail" placeholder="Email" required />
  <button type="submit">Add User</button>
</form>

<!-- Item Form -->
<form id="itemForm">
  <h3>Add Item</h3>
  <input type="text" id="itemTitle" placeholder="Title" required />
  <input type="text" id="itemDesc" placeholder="Description" required />
  <select id="itemCategory" required>
    <option value="">Select Category</option>
    <option value="Wearables">Wearables</option>
    <option value="Electronics">Electronics</option>
    <option value="Bags">Bags</option>
    <option value="Keys">Keys</option>
    <option value="Documents">Documents</option>
  </select>
  <select id="itemStatus" required>
    <option value="">Select Status</option>
    <option value="Lost">Lost</option>
    <option value="Found">Found</option>
  </select>
  <input type="email" id="itemUserEmail" placeholder="User Email" required />
  <button type="submit">Add Item</button>
</form>

<!-- Users Table -->
<h3>Users</h3>
<table id="usersTable">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Email</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- Items Table -->
<h3>Items</h3>
<table id="itemsTable">
  <thead>
    <tr>
      <th>ID</th>
      <th>Title</th>
      <th>Description</th>
      <th>Category</th>
      <th>Status</th>
      <th>User Email</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
  // Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBoL0OAU_hKgG8mbwEPlBk7xxdryEf6QOg",
    authDomain: "lostandfound-7e8f8.firebaseapp.com",
    databaseURL: "https://lostandfound-7e8f8-default-rtdb.firebaseio.com",
    projectId: "lostandfound-7e8f8",
    storageBucket: "lostandfound-7e8f8.firebasestorage.app",
    messagingSenderId: "511593808028",
    appId: "1:511593808028:web:126a0dd20d2bfbe0032d59",
    measurementId: "G-0KHM2MN4EG"
  };

  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }
  const db = firebase.database();

  // Display users
  function fetchUsers() {
    db.ref('users').once('value', snapshot => {
      const users = snapshot.val() || {};
      const tbody = document.querySelector('#usersTable tbody');
      tbody.innerHTML = '';
      Object.keys(users).forEach(id => {
        const user = users[id];
        tbody.innerHTML += <tr><td>${id}</td><td>${user.name}</td><td>${user.email}</td></tr>;
      });
    });
  }

  // Display items
  function fetchItems() {
    db.ref('items').once('value', snapshot => {
      const items = snapshot.val() || {};
      const tbody = document.querySelector('#itemsTable tbody');
      tbody.innerHTML = '';
      Object.keys(items).forEach(id => {
        const item = items[id];
        tbody.innerHTML += `<tr>
          <td>${id}</td>
          <td>${item.title}</td>
          <td>${item.description}</td>
          <td>${item.category}</td>
          <td>${item.status}</td>
          <td>${item.contactInfo}</td>
        </tr>`;
      });
    });
  }

  fetchUsers();
  fetchItems();

  // Add user
  document.getElementById('userForm').addEventListener('submit', e => {
    e.preventDefault();
    const name = document.getElementById('userName').value;
    const email = document.getElementById('userEmail').value;
    const userId = 'user' + Date.now();
    db.ref('users/' + userId).set({name, email})
      .then(() => {
        fetchUsers();
        e.target.reset();
      });
  });

  // Add item
  document.getElementById('itemForm').addEventListener('submit', e => {
    e.preventDefault();
    const title = document.getElementById('itemTitle').value;
    const description = document.getElementById('itemDesc').value;
    const category = document.getElementById('itemCategory').value;
    const status = document.getElementById('itemStatus').value;
    const contactInfo = document.getElementById('itemUserEmail').value;
    const createdAt = new Date().toISOString();
    const expireAt = new Date(Date.now() + 30*24*60*60*1000).toISOString(); // +30 days

    db.ref('items').push({title, description, category, status, contactInfo, createdAt, expireAt, notifications:{}})
      .then(() => {
        fetchItems();
        e.target.reset();
      });
  });
</script>

</body>
</html>